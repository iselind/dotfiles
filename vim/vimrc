set nocompatible

set backspace=indent,eol

syntax enable

set expandtab

set ignorecase
set smartcase
set incsearch

set ai
set si

set sts=4
set ts=4
set sw=4

"set foldmethod=syntax

set laststatus=2

set hls

set scrolloff=5

set background=light

"set makeprg=on_make

set modeline

" Make Vim automatically refresh any files that haven't been edited by Vim
set autoread

" Highlight space error
:highlight ExtraWhitespace term=inverse gui=inverse cterm=inverse
" Show trailing whitespace and when tabs and space are mixed, also highlight
" when we have more than one white space between non-whitespace characters
:match ExtraWhitespace /^\s\+$\|\s\+$\|S\s\{2,\}\S\|\t\+ \+/

:set cursorline

" How indentation looks like
set listchars=tab:▷⋅

filetype plugin indent on

set statusline=%t[%{strlen(&fenc)?&fenc:'none'},%{&ff}]%h%y%r%m%=L%l,C%c\ %P

" Git convenience commands, % is the current file name with folder relative to
" where vim was started
command Gadd !git add %
command Gdiff !git diff %
command Gstatus !git status
command Gcommit !git commit
command Gpush !git push

" Set tabstop, softtabstop and shiftwidth to the same value
command! -nargs=* Stab call Stab()
function! Stab()
    let l:tabstop = 1 * input('set tabstop = softtabstop = shiftwidth = ')
    if l:tabstop > 0
        let &l:sts = l:tabstop
        let &l:ts = l:tabstop
        let &l:sw = l:tabstop
    endif
    call SummarizeTabs()
endfunction

function! SummarizeTabs()
    try
        echohl ModeMsg
        echon 'tabstop='.&l:ts
        echon ' shiftwidth='.&l:sw
        echon ' softtabstop='.&l:sts
        if &l:et
            echon ' expandtab'
        else
            echon ' noexpandtab'
        endif
    finally
        echohl None
    endtry
endfunction

augroup filetypedetect
    au BufRead,BufNewFile *.ts set filetype=javascript
augroup END
autocmd BufWritePost CHANGELOG.md exe "!git add CHANGELOG.md; git commit -m 'Updated change log'"

nnoremap <C-J> <C-W><C-J>
nnoremap <C-K> <C-W><C-K>
nnoremap <C-L> <C-W><C-L>
nnoremap <C-H> <C-W><C-H>

set splitbelow
set splitright

execute pathogen#infect()
